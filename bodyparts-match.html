<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº”å®˜èº«ä½“é…å¯¹</title>
    <style>
        :root {
            --card-size: 110px;
            --gap-size: 15px;
            --primary-color: #ff9f43; /* æ¸©æš–çš„æ©™è‰² */
            --accent-color: #ff6b6b;
            --bg-color: #fff5f0; /* æ·¡æ·¡çš„è‚¤è‰²èƒŒæ™¯ */
        }

        body {
            font-family: "Microsoft YaHei", "SimHei", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            color: #d35400;
            margin: 0 0 10px 0;
            font-size: 1.8rem;
            text-align: center;
        }

        p.instruction {
            color: #e67e22;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .game-board {
            width: 100%;
            max-width: 1000px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .section-box {
            background: rgba(255, 255, 255, 0.8);
            border: 3px solid #ffeaa7;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 8px 20px rgba(255, 159, 67, 0.1);
        }

        .section-title {
            display: inline-block;
            background: #fff;
            padding: 5px 20px;
            border-radius: 50px;
            color: #f39c12;
            font-size: 0.9rem;
            margin-bottom: 15px;
            font-weight: bold;
            border: 1px solid #f1c40f;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(var(--card-size), 1fr));
            gap: var(--gap-size);
            justify-items: center;
        }

        .card {
            width: var(--card-size);
            height: var(--card-size);
            background: white;
            border-radius: 50%; /* åœ†å½¢å¡ç‰‡ï¼Œé€‚åˆäº”å®˜ */
            box-shadow: 0 5px 0 #fab1a0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s, box-shadow 0.1s;
            position: relative;
            border: 4px solid #fff;
            overflow: hidden;
        }

        .card:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #fab1a0;
        }

        /* å›¾ç‰‡æ ·å¼ */
        .card img {
            width: 70%;
            height: 70%;
            object-fit: contain;
            pointer-events: none;
        }

        /* è‡ªå®šä¹‰SVGæ ·å¼ (çœ‰æ¯›) */
        .card svg {
            width: 70%;
            height: 70%;
            pointer-events: none;
        }

        /* æ–‡å­—å¡ç‰‡ä¸éœ€è¦åœ†å½¢ */
        .text-card {
            border-radius: 15px; 
            flex-direction: column;
            background-color: #fff;
            line-height: 1.4;
        }

        .pinyin {
            font-size: 0.9rem;
            color: #aaa;
            font-family: Arial, sans-serif;
        }

        .hanzi {
            font-size: 1.6rem;
            font-weight: 900;
            color: #d35400;
        }

        .selected {
            border: 4px solid var(--primary-color);
            background-color: #ffeaa7;
            transform: scale(1.05);
            box-shadow: 0 10px 15px rgba(255, 159, 67, 0.3);
            z-index: 10;
        }

        .shake {
            animation: shake 0.5s;
            border-color: #ff7675;
            background-color: #fab1a0;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-8px); }
            40% { transform: translateX(8px); }
            60% { transform: translateX(-8px); }
            80% { transform: translateX(8px); }
        }

        .vanish {
            animation: popOut 0.6s forwards;
            pointer-events: none;
        }
        @keyframes popOut {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0; background: #55efc4; }
            100% { transform: scale(0); opacity: 0; width: 0; margin: 0; border: 0; padding: 0;}
        }

        #victory-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 1000;
        }
        #victory-screen h2 { font-size: 3rem; margin-bottom: 20px; text-align: center;}
        
        button.restart-btn {
            padding: 15px 40px;
            font-size: 1.5rem;
            border: none;
            background: #00b894;
            color: white;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 0 #008f72;
            font-weight: bold;
        }
        
        @media (max-width: 600px) {
            :root { --card-size: 80px; }
            .game-board { gap: 15px; }
            .section-box { padding: 10px; }
            h1 { font-size: 1.5rem; }
            .card { border-radius: 12px; } /* æ‰‹æœºä¸Šæ”¹å›åœ†è§’çŸ©å½¢ï¼Œæ›´çœç©ºé—´ */
        }
    </style>
</head>
<body>

    <h1>ğŸ‘€ äº”å®˜èº«ä½“é…å¯¹</h1>
    <p class="instruction">ç‚¹å‡»èº«ä½“éƒ¨ä½ï¼Œå†ç‚¹å‡»å¯¹åº”çš„åç§°</p>

    <div class="game-board">
        <div class="section-box">
            <div class="section-title">èº«ä½“éƒ¨ä½</div>
            <div class="grid-container" id="img-grid"></div>
        </div>

        <div class="section-box">
            <div class="section-title">ä¸­æ–‡è¯æ±‡</div>
            <div class="grid-container" id="word-grid"></div>
        </div>
    </div>

    <div id="victory-screen">
        <h2>ğŸ‰ æŒ‘æˆ˜æˆåŠŸï¼</h2>
        <button class="restart-btn" onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
    </div>

    <script>
        // Twemoji èµ„æºåº“
        const emojiBaseUrl = "https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/";

        // === æ•°æ®é…ç½® ===
        // id: å”¯ä¸€æ ‡è¯†
        // type: 'emoji' (ä½¿ç”¨CDNå›¾ç‰‡) æˆ– 'svg' (æ‰‹ç»˜ä»£ç )
        const parts = [
            // çœ¼ç› ğŸ‘€
            { id: 'eye',     text: 'çœ¼ç›',   pinyin: 'yÇn jing',  type: 'emoji', code: '1f440' },
            
            // é¼»å­ ğŸ‘ƒ
            { id: 'nose',    text: 'é¼»å­',   pinyin: 'bÃ­ zi',     type: 'emoji', code: '1f443' },
            
            // å˜´å·´ ğŸ‘„
            { id: 'mouth',   text: 'å˜´å·´',   pinyin: 'zuÇ ba',    type: 'emoji', code: '1f444' },
            
            // è€³æœµ ğŸ‘‚
            { id: 'ear',     text: 'è€³æœµ',   pinyin: 'Ä›r duo',    type: 'emoji', code: '1f442' },
            
            // å¤´ ğŸ§’ (ç”¨ä¸€ä¸ªå°å­©çš„å¤´ä»£è¡¨)
            { id: 'head',    text: 'å¤´',     pinyin: 'tÃ³u',       type: 'emoji', code: '1f9d2' },
            
            // çœ‰æ¯› (Emojié‡Œæ²¡æœ‰å•ç‹¬çš„çœ‰æ¯›ï¼Œè¿™é‡Œç”¨ SVG æ‰‹ç»˜ä¸€å¯¹æµ“çœ‰)
            { 
                id: 'eyebrow', text: 'çœ‰æ¯›', pinyin: 'mÃ©i mao', type: 'svg',
                svgContent: `
                <svg viewBox="0 0 100 60" xmlns="http://www.w3.org/2000/svg">
                    <!-- å·¦çœ‰ -->
                    <path d="M10,30 Q30,10 45,30" fill="none" stroke="#5d4037" stroke-width="6" stroke-linecap="round" />
                    <!-- å³çœ‰ -->
                    <path d="M55,30 Q70,10 90,30" fill="none" stroke="#5d4037" stroke-width="6" stroke-linecap="round" />
                </svg>
                `
            }
        ];

        let selectedImg = null;
        let selectedWord = null;
        let matches = 0;
        let lockBoard = false;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playTone(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            osc.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            if (type === 'correct') {
                // æ¸…è„†çš„å®å®å£°
                osc.type = 'sine';
                osc.frequency.setValueAtTime(659, audioCtx.currentTime); // E5
                osc.frequency.exponentialRampToValueAtTime(880, audioCtx.currentTime + 0.1); // A5
                gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.5);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.5);
            } else {
                // ä½æ²‰çš„å˜Ÿå˜Ÿå£°
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                osc.frequency.linearRampToValueAtTime(100, audioCtx.currentTime + 0.2);
                gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.001, audioCtx.currentTime + 0.3);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.3);
            }
        }

        function shuffle(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function initGame() {
            const imgGrid = document.getElementById('img-grid');
            const wordGrid = document.getElementById('word-grid');

            const imgData = shuffle([...parts]);
            const wordData = shuffle([...parts]);

            // ç”Ÿæˆå›¾ç‰‡å¡ç‰‡
            imgData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card img-card';
                card.dataset.id = item.id;
                card.dataset.type = 'img';
                
                if (item.type === 'svg') {
                    card.innerHTML = item.svgContent;
                } else {
                    card.innerHTML = `<img src="${emojiBaseUrl}${item.code}.svg" alt="${item.text}">`;
                }

                card.onclick = handleCardClick;
                imgGrid.appendChild(card);
            });

            // ç”Ÿæˆæ–‡å­—å¡ç‰‡
            wordData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card text-card';
                card.dataset.id = item.id;
                card.dataset.type = 'word';
                card.innerHTML = `
                    <span class="pinyin">${item.pinyin}</span>
                    <span class="hanzi">${item.text}</span>
                `;
                card.onclick = handleCardClick;
                wordGrid.appendChild(card);
            });
        }

        function handleCardClick(e) {
            if (lockBoard) return;
            const clicked = e.currentTarget;
            if (clicked.classList.contains('selected')) return;

            if (clicked.dataset.type === 'img') {
                if (selectedImg) selectedImg.classList.remove('selected');
                selectedImg = clicked;
                selectedImg.classList.add('selected');
            } else {
                if (selectedWord) selectedWord.classList.remove('selected');
                selectedWord = clicked;
                selectedWord.classList.add('selected');
            }

            if (selectedImg && selectedWord) {
                checkMatch();
            }
        }

        function checkMatch() {
            lockBoard = true;
            const isMatch = selectedImg.dataset.id === selectedWord.dataset.id;

            if (isMatch) {
                playTone('correct');
                selectedImg.classList.add('vanish');
                selectedWord.classList.add('vanish');
                matches++;
                resetSelection();
                if (matches === parts.length) {
                    setTimeout(() => {
                        document.getElementById('victory-screen').style.display = 'flex';
                        playTone('correct');
                    }, 600);
                }
            } else {
                playTone('wrong');
                selectedImg.classList.add('shake');
                selectedWord.classList.add('shake');
                setTimeout(() => {
                    selectedImg.classList.remove('shake', 'selected');
                    selectedWord.classList.remove('shake', 'selected');
                    resetSelection();
                }, 500);
            }
        }

        function resetSelection() {
            selectedImg = null;
            selectedWord = null;
            lockBoard = false;
        }

        initGame();
    </script>
</body>
</html>