<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­æ–‡å¤§å®¶åº­ - æœ€ç»ˆæŒ‘æˆ˜ç‰ˆ (No Hints)</title>
    <style>
        /* --- åŸºç¡€è®¾ç½® --- */
        :root {
            --dad-color: #3498db;
            --dad-bg: #eef7fc;
            --mom-color: #e91e63;
            --mom-bg: #fdf2f6;
            --line-color: #95a5a6;
        }

        body {
            font-family: "Microsoft YaHei", "Segoe UI", sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            user-select: none;
        }

        h1 { color: #2c3e50; margin: 5px 0; font-size: 24px; }
        .subtitle { color: #7f8c8d; font-size: 14px; margin-bottom: 15px; }

        .game-wrapper {
            width: 100%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* --- æ ‘çŠ¶ç»“æ„å®¹å™¨ --- */
        .tree-container {
            background: white;
            padding: 30px 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            width: 100%;
            overflow-x: auto;
        }

        /* ä¾§è¾¹å±‚çº§æ ‡ç­¾ */
        .level-label {
            position: absolute;
            left: 10px;
            font-size: 11px;
            font-weight: bold;
            color: #bdc3c7;
            text-transform: uppercase;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            letter-spacing: 2px;
        }

        /* --- é€šç”¨å¸ƒå±€è¡Œ --- */
        .level-row {
            display: flex;
            justify-content: center;
            gap: 40px;
            position: relative;
            padding-bottom: 45px;
        }
        .level-row:last-child { padding-bottom: 0; }

        /* --- åˆ†ç»„æ¡† --- */
        .side-group {
            border-radius: 15px;
            padding: 15px;
            position: relative;
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .dad-side { background-color: var(--dad-bg); border: 2px dashed #a9d5ef; }
        .mom-side { background-color: var(--mom-bg); border: 2px dashed #f8bbd0; }

        /* --- è¿æ¥çº¿ --- */
        .marriage-line {
            width: 30px; height: 2px; background: var(--line-color);
            align-self: center; margin: 0 2px;
        }
        .vertical-line {
            position: absolute; width: 2px; background: var(--line-color);
            left: 50%; transform: translateX(-50%); z-index: 0;
        }
        .l0-to-l1 { height: 45px; bottom: 0; } 

        /* --- ç›®æ ‡æ§½ä½ (Drop Zone) --- */
        .drop-zone {
            width: 100px;  /* ç¨å¾®åŠ å®½ */
            height: 130px; /* ç¨å¾®åŠ é«˜ */
            background: rgba(255,255,255,0.9);
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            position: relative;
            z-index: 2;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 5px;
        }

        /* é¢œè‰²å®šä¹‰ */
        .role-grand { border-color: #95a5a6; }
        .role-dad { border-color: var(--dad-color); }
        .role-mom { border-color: var(--mom-color); }
        .role-kid { border-color: #f39c12; }
        .role-me  { border-color: #27ae60; background: #e8f5e9; border-width: 3px; transform: scale(1.05); }

        .drop-zone.highlight { transform: scale(1.1); background: #fffbe6; border-color: #f1c40f; }
        
        /* åŒ¹é…æˆåŠŸåçš„æ ·å¼ */
        .matched { background-color: #d4efdf !important; border-color: #27ae60 !important; }

        .icon { font-size: 38px; margin-bottom: 8px; }
        
        /* ç›®æ ‡æ¡†é‡Œçš„è‹±è¯­æ ‡ç­¾ (åªç•™è‹±è¯­ï¼Œä¸ç•™æ‹¼éŸ³) */
        .label { 
            font-size: 11px; 
            color: #7f8c8d; 
            text-transform: uppercase; 
            font-weight: bold; 
            text-align: center; 
            line-height: 1.3;
            height: 30px; /* å ä½é«˜åº¦ï¼Œä¿æŒå¯¹é½ */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- åº•éƒ¨å¾…é€‰å¡ç‰‡ (Cards) - å­—å·åŠ å¤§ç‰ˆ --- */
        .cards-container {
            margin-top: 25px;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            padding: 20px;
            background: #fff;
            border-radius: 15px;
            width: 100%;
            min-height: 100px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        .card {
            width: 110px;  /* å˜å¤§ */
            height: 70px;  /* å˜é«˜ */
            background: white;
            border: 3px solid #34495e; /* è¾¹æ¡†åŠ ç²— */
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: grab;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }
        .card:active { cursor: grabbing; transform: scale(0.95); }
        .card.hidden { display: none; }
        
        /* åŠ å¤§å­—å· */
        .hanzi { font-size: 28px; font-weight: bold; color: #2c3e50; line-height: 1.1; }
        .pinyin { font-size: 15px; color: #555; font-weight: 500; }

        /* åŠ¨ç”» */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        .shake { animation: shake 0.3s; background: #fadbd8 !important; }

        #success-modal {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 50px rgba(0,0,0,0.3);
            text-align: center; z-index: 100; border: 5px solid #27ae60; min-width: 300px;
        }
        
        .btn-sound { margin-top: 15px; font-size: 13px; color: #3498db; cursor: pointer; text-decoration: underline; }

        @media (max-width: 768px) {
            .drop-zone { width: 80px; height: 110px; }
            .card { width: 90px; height: 60px; }
            .hanzi { font-size: 22px; }
            .pinyin { font-size: 12px; }
            .icon { font-size: 30px; }
        }
    </style>
</head>
<body>

    <div class="game-wrapper">
        <h1>ğŸŒ³ ä¸­æ–‡å¤§å®¶åº­ (No Pinyin Hints)</h1>
        <div class="subtitle">çœ‹å›¾è¯†å…³ç³»ï¼Œæ‹–å…¥æ­£ç¡®çš„æ±‰å­—å¡ç‰‡</div>

        <div class="tree-container">
            
            <div class="level-label" style="top: 50px;">Grandparents</div>
            <div class="level-label" style="top: 240px;">Parents</div>
            <div class="level-label" style="bottom: 60px;">Children</div>

            <!-- Level 0: ç¥–çˆ¶æ¯ -->
            <div class="level-row">
                <!-- çˆ·çˆ·å¥¶å¥¶ (å»æ‰æ‹¼éŸ³æç¤ºï¼Œåªç•™è‹±è¯­) -->
                <div class="side-group dad-side" style="padding-bottom: 25px;">
                    <div class="drop-zone role-grand" data-target="yeye">
                        <div class="icon">ğŸ‘´</div>
                        <div class="label">Dad's Dad</div>
                    </div>
                    <div class="marriage-line"></div>
                    <div class="drop-zone role-grand" data-target="nainai">
                        <div class="icon">ğŸ‘µ</div>
                        <div class="label">Dad's Mom</div>
                    </div>
                    <div class="vertical-line l0-to-l1"></div>
                </div>

                <div style="width: 30px"></div>

                <!-- å¤–å…¬å¤–å©† (å»æ‰æ‹¼éŸ³æç¤º) -->
                <div class="side-group mom-side" style="padding-bottom: 25px;">
                    <div class="drop-zone role-grand" data-target="waigong">
                        <div class="icon">ğŸ‘´</div>
                        <div class="label">Mom's Dad</div>
                    </div>
                    <div class="marriage-line"></div>
                    <div class="drop-zone role-grand" data-target="waipo">
                        <div class="icon">ğŸ‘µ</div>
                        <div class="label">Mom's Mom</div>
                    </div>
                    <div class="vertical-line l0-to-l1"></div>
                </div>
            </div>

            <!-- Level 1: çˆ¶æ¯ -->
            <div class="level-row">
                <div class="side-group dad-side">
                    <div class="drop-zone role-dad" data-target="gugu">
                        <div class="icon">ğŸ‘©</div>
                        <div class="label">Dad's Sister</div>
                    </div>
                    <div class="drop-zone role-dad" data-target="baba" style="border-width:3px;">
                        <div class="icon">ğŸ‘¨</div>
                        <div class="label">Dad</div>
                    </div>
                    <div class="drop-zone role-dad" data-target="shushu">
                        <div class="icon">ğŸ‘¨ğŸ‘“</div>
                        <div class="label">Dad's Brother</div>
                    </div>
                </div>

                <!-- å©šå§»è¿çº¿ -->
                <div style="position: relative; width: 40px; align-self: center; height: 2px; background: #333;">
                    <div style="position: absolute; left: 50%; top: 0; width: 2px; height: 85px; background: #333; z-index: 0;"></div>
                </div>

                <div class="side-group mom-side">
                    <div class="drop-zone role-mom" data-target="jiujiu">
                        <div class="icon">ğŸ‘¨</div>
                        <div class="label">Mom's Brother</div>
                    </div>
                    <div class="drop-zone role-mom" data-target="mama" style="border-width:3px;">
                        <div class="icon">ğŸ‘©</div>
                        <div class="label">Mom</div>
                    </div>
                    <div class="drop-zone role-mom" data-target="ayi">
                        <div class="icon">ğŸ‘©ğŸ’„</div>
                        <div class="label">Mom's Sister</div>
                    </div>
                </div>
            </div>

            <!-- Level 2: å­©å­ -->
            <div class="level-row" style="margin-top: 20px; border-top: 2px solid #333; padding-top: 25px; width: 95%;">
                <div class="drop-zone role-kid" data-target="gege">
                    <div class="icon">ğŸ‘¦â¬†ï¸</div>
                    <div class="label">Older Bro</div>
                </div>
                <div class="drop-zone role-kid" data-target="jiejie">
                    <div class="icon">ğŸ‘§â¬†ï¸</div>
                    <div class="label">Older Sis</div>
                </div>

                <div class="drop-zone role-me">
                    <div class="icon">ğŸ˜¸</div>
                    <div class="label">ME</div>
                </div>

                <div class="drop-zone role-kid" data-target="didi">
                    <div class="icon">ğŸ‘¶</div>
                    <div class="label">Younger Bro</div>
                </div>
                <div class="drop-zone role-kid" data-target="meimei">
                    <div class="icon">ğŸ‘§ğŸ­</div>
                    <div class="label">Younger Sis</div>
                </div>
            </div>

        </div>

        <div class="cards-container" id="cards-pool"></div>
        <div class="btn-sound" onclick="testAudio()">ğŸ”Š å¼€å¯å£°éŸ³ / Unmute Sound</div>
    </div>

    <div id="success-modal">
        <h1 style="margin:0">ğŸŒŸ å®Œç¾! Perfect! ğŸŒŸ</h1>
        <p style="font-size:18px; margin:10px 0;">ä½ å·²ç»è®¤è¯†äº†æ‰€æœ‰å®¶åº­æˆå‘˜ï¼</p>
        <button onclick="location.reload()" style="padding:12px 30px; background:#3498db; color:white; border:none; border-radius:8px; cursor:pointer; font-size:18px; font-weight:bold; box-shadow: 0 4px 0 #2980b9;">å†ç©ä¸€æ¬¡ (Replay)</button>
    </div>

    <script>
        /* --- Audio (ä¸å˜) --- */
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(type) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            if (type === 'ok') {
                osc.type = 'sine'; osc.frequency.setValueAtTime(600, audioCtx.currentTime); osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1);
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime); gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'err') {
                osc.type = 'sawtooth'; osc.frequency.setValueAtTime(100, audioCtx.currentTime); osc.frequency.linearRampToValueAtTime(80, audioCtx.currentTime + 0.3);
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime); gain.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'win') {
                [523, 659, 783, 1046, 1318, 1568].forEach((f, i) => {
                    setTimeout(() => {
                        const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
                        o.connect(g); g.connect(audioCtx.destination);
                        o.frequency.value = f; g.gain.value = 0.1; g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                        o.start(); o.stop(audioCtx.currentTime + 0.3);
                    }, i * 120);
                });
            }
        }
        function testAudio() { playSound('ok'); }

        /* --- Data --- */
        const data = [
            { id: 'yeye', h: 'çˆ·çˆ·', p: 'yÃ© ye' }, { id: 'nainai', h: 'å¥¶å¥¶', p: 'nÇi nai' },
            { id: 'waigong', h: 'å¤–å…¬', p: 'wÃ i gÅng' }, { id: 'waipo', h: 'å¤–å©†', p: 'wÃ i pÃ³' },
            { id: 'baba', h: 'çˆ¸çˆ¸', p: 'bÃ  ba' }, { id: 'mama', h: 'å¦ˆå¦ˆ', p: 'mÄ ma' },
            { id: 'shushu', h: 'å”å”', p: 'shÅ« shu' }, { id: 'gugu', h: 'å§‘å§‘', p: 'gÅ« gu' },
            { id: 'jiujiu', h: 'èˆ…èˆ…', p: 'jiÃ¹ jiu' }, { id: 'ayi', h: 'é˜¿å§¨', p: 'Ä yÃ­' },
            { id: 'gege', h: 'å“¥å“¥', p: 'gÄ“ ge' }, { id: 'didi', h: 'å¼Ÿå¼Ÿ', p: 'dÃ¬ di' },
            { id: 'jiejie', h: 'å§å§', p: 'jiÄ› jie' }, { id: 'meimei', h: 'å¦¹å¦¹', p: 'mÃ¨i mei' }
        ];

        let matched = 0;
        const pool = document.getElementById('cards-pool');

        function init() {
            [...data].sort(()=>Math.random()-0.5).forEach(item => {
                const el = document.createElement('div');
                el.className = 'card';
                el.draggable = true;
                el.id = 'c-' + item.id;
                // å¡ç‰‡ä¸Šæ˜¾ç¤ºå¤§å¤§çš„æ±‰å­—å’Œæ‹¼éŸ³
                el.innerHTML = `<div class="hanzi">${item.h}</div><div class="pinyin">${item.p}</div>`;
                el.dataset.target = item.id;
                
                el.addEventListener('dragstart', e => {
                    if (audioCtx.state === 'suspended') audioCtx.resume();
                    e.dataTransfer.setData('tid', item.id);
                    e.dataTransfer.setData('cid', el.id);
                    setTimeout(()=>el.style.opacity=0.5,0);
                });
                el.addEventListener('dragend', ()=>el.style.opacity=1);
                pool.appendChild(el);
            });
        }

        document.querySelectorAll('.drop-zone[data-target]').forEach(z => {
            z.addEventListener('dragover', e => e.preventDefault());
            z.addEventListener('dragenter', e => { e.preventDefault(); z.classList.add('highlight'); });
            z.addEventListener('dragleave', () => z.classList.remove('highlight'));
            z.addEventListener('drop', e => {
                e.preventDefault();
                z.classList.remove('highlight');
                const tid = e.dataTransfer.getData('tid');
                const cid = e.dataTransfer.getData('cid');
                if (!cid) return; 
                const card = document.getElementById(cid);

                if (tid === z.dataset.target) {
                    // æ­£ç¡®ï¼šæ’­æ”¾å£°éŸ³ï¼Œéšè—å¡ç‰‡ï¼Œç›®æ ‡æ¡†å˜è‰²å¹¶æ˜¾ç¤ºæ±‰å­—
                    playSound('ok');
                    card.classList.add('hidden');
                    z.classList.add('matched');
                    // åŒ¹é…æˆåŠŸåï¼Œç›®æ ‡æ¡†é‡Œæ‰æ˜¾ç¤ºå¤§æ±‰å­—
                    z.innerHTML = `
                        <div style="font-size:20px; margin-bottom:5px;">âœ…</div>
                        <div class="hanzi" style="font-size:26px">${card.querySelector('.hanzi').innerText}</div>
                        <div class="pinyin" style="font-size:14px">${card.querySelector('.pinyin').innerText}</div>
                    `;
                    matched++;
                    if(matched === data.length) {
                        setTimeout(()=>{ playSound('win'); document.getElementById('success-modal').style.display = 'block'; }, 500);
                    }
                } else {
                    // é”™è¯¯
                    playSound('err');
                    z.classList.add('shake');
                    setTimeout(()=>z.classList.remove('shake'), 400);
                }
            });
        });

        init();
    </script>
</body>
</html>